<?xml version="1.0" encoding="utf-8"?>
<!--
    Part of Odoo Module Developed by Kinfinity Tech Pvt. Ltd.
    See LICENSE file for full copyright and licensing details.
-->
<odoo>

    <!-- Script Init into <head> tag -->
    <template id="OneSignalSDK_web_push_notifications"
              inherit_id="portal.frontend_layout"
              name="OneSignalSDK Web Push Notifications">
        <xpath expr="//footer" position="after">
            <![CDATA[
            <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js"
                    async='async'/>
	    </script>
            <script>
                var OneSignal = window.OneSignal || [];
                OneSignal.push(["init", {
                appId: "<t t-raw="website.onesignalsdk_app_id"/>",
                autoRegister: true,
                notifyButton: {
                    enable: false
                },
                safari_web_id: "<t t-raw="website.onesignalsdk_safari_web_id"/>",
                }]);
            </script>
            ]]>
        </xpath>
    </template>

    <!-- OneSignalSDK Website Settings -->
    <record id="view_onesignal_website_config_settings" model="ir.ui.view">
        <field name="name">OneSignalSDK Website Settings</field>
        <field name="inherit_id" ref="website.res_config_settings_view_form"/>
        <field name="model">res.config.settings</field>
        <field name="arch" type="xml">
            <xpath expr="//div[@id='cdn_setting']" position="after">
                <div class="col-xs-12 col-md-12 o_setting_box"
                     id="onesignalsdk_web_push_notifications">
                    <h2>OneSignalSDK Web Push Notifications</h2>
                    <div class="row mt16 o_settings_container" id="onesignalsdk">
                        <div class="col-xs-12 col-md-6 o_setting_box" id="onesignalsdk_key">
                            <label for="onesignalsdk_app_id"/>
                            <div name="onesignalsdk_app_id">
                                <div class="oe_inline">
                                    <field name="onesignalsdk_app_id"
                                           placeholder="asd*eb**s*-3*****15-****-e6sdf****2e2"
                                           required="1"/>
                                </div>
                            </div>
                            <div>
                                <a href="https://documentation.onesignal.com/docs/web-push-typical-setup" class="oe_link fa fa-arrow-right" target="_blank">
                                    How to get my APP ID
                                </a>
                            </div>
                        </div>
                        <div class="col-xs-12 col-md-6 o_setting_box" id="onesignalsdk_safari_key">
                            <label for="onesignalsdk_safari_web_id"/>
                            <div name="onesignalsdk_safari_web_id">
                                <div class="oe_inline">
                                    <field name="onesignalsdk_safari_web_id"
                                           placeholder="web.onesignal.auto.00*****3-as**-***c-a***-***2a****36*"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
</odoo>
